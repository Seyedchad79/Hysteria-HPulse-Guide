اسکریپتی برای راه اندازی ساده تانل با استفاده از Hysteria V2.
پروتکل Hysteria یک ابزار قدرتمند مبتنی بر پروتکل QUIC است که برای شبکه‌های غیر قابل اعتماد و دارای Packet Loss بالا بهینه شده و ترافیک را به شکل یک ارتباط استاندارد HTTPS/HTTP3 پنهان‌سازی می‌کند.

---

## ⚡️ ویژگی ها

* نصب و حذف آسان
* پشتیبانی از حالت های Strict و SNI
* پشتیبانی از IPv4 و IPv6
* قابلیت Masquerade برای پنهان سازی ترافیک
* دریافت خودکار SSL با استفاده از acme.sh
* قابلیت زمانبندی برای ریستارت خودکار سرویس

---

## 🚀 نصب و اجرا

```bash
bash <(curl -fsSL [https://raw.githubusercontent.com/Erfan-XRay/HPulse/main/HPulse.sh](https://raw.githubusercontent.com/Erfan-XRay/HPulse/main/HPulse.sh))
```


## راهنمای جامع و قدم به قدم
---
🎯 فصل ۱: آماده‌سازی و پیش‌نیازها
---
نکته کلیدی: موفقیت‌آمیز بودن کل فرآیند به آماده‌سازی صحیح این مرحله بستگی دارد.

دو سرور مجازی (VPS)

سرور خارجی (Edge): یک سرور خارج از ایران (مانند آلمان) با سیستم‌عامل Ubuntu 22.04.

سرور داخلی (Gateway): یک سرور داخل ایران با سیستم‌عامل Ubuntu 22.04.



یک دامنه (Domain)

یک زیردامنه (مثلاً tunnel.yourdomain.com) بسازید.

در پنل Cloudflare، یک رکورد A ایجاد کنید که این زیردامنه را به IP سرور خارجی شما اشاره دهد.

⚠️ هشدار مهم: پراکسی Cloudflare (ابر نارنجی 🟧) برای این رکورد باید خاموش (DNS Only 🩶) باشد تا گواهی SSL به درستی دریافت شود.


🌍 فصل ۲: پیکربندی سرور خارجی (Edge Server)
---
در ترمینال سرور خارجی، پس از اجرای اسکریپت، گزینه 1. Install Hysteria As A Server را انتخاب کنید.

انتخاب حالت نصب:

گزینه 1. Strict را انتخاب کنید. این حالت امن‌تر است.


وارد کردن اطلاعات:
Domain: دامنه‌ای که آماده کرده‌اید را وارد کنید.

Port: پورت 443 را وارد کنید.

Password: یک رمز عبور قوی و پیچیده تعریف کنید.

فعال‌سازی پنهان‌سازی:

به سوالات مربوط به Obfuscation و Masquerade پاسخ مثبت (y) بدهید.

🧠 در پشت صحنه: قابلیت Masquerade مهم‌ترین بخش پنهان‌سازی است. این کار ترافیک شما را پشت یک وب‌سایت معتبر مخفی می‌کند و شناسایی سرور شما را بسیار دشوار می‌سازد.


فصل ۳: پیکربندی سرور داخلی
---
در ترمینال سرور داخلی، پس از اجرای اسکریپت، گزینه Install Hysteria As A Client را انتخاب کنید.

وارد کردن اطلاعات سرور:

اطلاعات سرور خارجی (دامنه، پورت و رمز عبور) را که در مرحله قبل تعریف کردید، وارد نمایید.

به سوالات Obfuscation و Masquerade نیز مطابق با تنظیمات سرور، پاسخ مثبت (y) بدهید.

تنظیم پورت فورواردینگ (Port Forwarding):

در این بخش، پورت‌هایی که پنل‌های شما (مانند Xray) روی آن‌ها فعال هستند را وارد کنید.

می‌توانید چند پورت را با کاما (,) از هم جدا کنید (مثال: 2096,8443).

🧠 در پشت صحنه: اسکریپت با استفاده از iptables قوانینی را تنظیم می‌کند که هر ترافیکی که به این پورت‌ها روی سرور داخلی وارد شود را به سمت تانل Hysteria هدایت می‌کند.


✅ فصل ۴: مدیریت و اعتبارسنجی نهایی
---
برای مدیریت سرویس (مشاهده وضعیت، ری‌استارت یا بررسی لاگ‌ها)، می‌توانید از گزینه 4 در منوی اصلی اسکریپت استفاده کنید.


تست نهایی عملکرد تانل:
---
برای اطمینان از صحت عملکرد، دستور زیر را در ترمینال سرور داخلی (ایران) اجرا کنید:

```bash
curl ifconfig.me
```
🎉 نتیجه موفق: خروجی این دستور باید آدرس IP سرور خارجی شما باشد. اگر چنین بود، تانل شما با موفقیت کامل راه‌اندازی شده است.

❤️ حمایت مالی
در صورتی که این اسکریپت برای شما مفید بود، می توانید از طریق لینک زیر از عرفان حمایت کنید

https://nowpayments.io/donation/erfan404

Credits
Erfan_XRay
